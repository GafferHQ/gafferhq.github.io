name: Check HTML and Links

on:
  push:
  pull_request:

jobs:

  Update:

    runs-on: ubuntu-16.04

    steps:

    - uses: actions/checkout@v2

    - uses: actions/setup-ruby@v1
      with:
        ruby-version: '2.4'

    - name: Build
      run: bundle exec jekyll build

    - name: Check
      run: |
        gem install html-proofer
        htmlproofer ./_site --only-4xx --check-html --empty-alt-ignore --url-ignore "/vimeo.com/"
      env:
        NOKOGIRI_USE_SYSTEM_LIBRARIES: true # speeds up installation of html-proofer
